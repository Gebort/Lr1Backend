<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8">
        <title>Books</title>
    </head>
    <body>
        <div>
            <a href="/books">Books</a>
            <a href="/authors">Authors</a>
            <a href="/genres">Genres</a>
        </div>
        <div>
            <h1>All books</h1>
            <button class="create"><a th:href="@{/books/create}">New book</a></button>
            <th:block th:each="book:${books}">
                <div>
                    <h3 th:text="${book.getTitle() + ', ' + book.getGenre().getGenre()}"></h3>
                    <a th:href="@{'/rating/'+${book.getBookId()}}"
                       th:text="${'Total ratings -  ' + book.getTotalRatings() + ', average - ' + book.getAverageRating()}"></a>
                    <p th:text="${'Authors: '}"></p>
                    <th:block th:each="author:${book.getAuthors()}">
                        <div>
                            <a th:href="@{'/authors/'+${author.getAuthorId()}}"
                            th:text="${author.getFirstName() + ' ' + author.getLastName() + ' '}"></a>
                        </div>
                    </th:block>
                    <p>===============================</p>
                </div>
            </th:block>
        </div>
    </body>
</html>
